name: Build SQLCipher (Windows MinGW-w64)

on:
  workflow_dispatch:
    inputs:
      tag:
        description: 'SQLCipher tag (ex: v4.10.0)'
        required: true
        default: 'v4.10.0'

jobs:
  build-win:
    runs-on: windows-latest

    steps:
      - name: 🔹 Preparar ambiente
        shell: bash
        run: |
          echo "🔹 Atualizando e instalando dependências..."
          choco install msys2 --no-progress -y
          C:\tools\msys64\usr\bin\bash -lc "pacman -Sy --noconfirm mingw-w64-x86_64-toolchain mingw-w64-x86_64-openssl make autoconf"

      - name: 🔹 Clonar SQLCipher
        shell: bash
        run: |
          echo "🔹 Baixando SQLCipher versão ${{ github.event.inputs.tag }}"
          git clone https://github.com/sqlcipher/sqlcipher.git
          cd sqlcipher
          git checkout ${{ github.event.inputs.tag }}

      - name: ⚙️ Gerar sqlite3.c e shell.c
        shell: ba
